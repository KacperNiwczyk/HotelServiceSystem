@using HotelServiceSystem.Interfaces.Services
@using HotelServiceSystem.Entities
@using HotelServiceSystem.Core
@using System.Linq.Expressions
@inject IAdditionalServiceService additionalServiceService

<div class="card">
    <div class="card-body" style="display: flex">
        <MatChipSet Filter="@true" @bind-SelectedChips="@_selectedChips" SelectedChipChanged="@OnChipChanged">
            @foreach (var additionalService in AdditionalServiceList)
            {
                <MatChip Label="@additionalService.Name" IsCheckable="@true" Attributes="@(new Dictionary<string, object>{{IdAttribute, additionalService.Id}})" />
            }
        </MatChipSet>
    </div>
</div>


@code {
        
    private const string IdAttribute = "Id";

    [Parameter]
    public List<AdditionalService> AdditionalServiceList { get; set; }
    
    [Parameter]
    public List<MatChip> SelectedChips { get; set; }
    
    [Parameter]
    public EventCallback<MatChip> SelectedChipsChanged { get; set; }

    private MatChip[] _selectedChips = null;

    private async Task OnChipChanged(MatChip chip)
    {
        await SelectedChipsChanged.InvokeAsync(chip);
    }
}