@page "/eventReservationDetails/{Id:int}"
@using HotelServiceSystem.Interfaces.Services
@using HotelServiceSystem.Entities
@using HotelServiceSystem.ViewModel
@inject IEventReservationService eventReservationService
@inject NavigationManager navigationManager
<HssEventReservationInput EventViewModel="@EventReservationModel" OnSubmit="@OnReservationEdit"/>

@code {
    [Parameter]
    public int Id { get; set; }
    
    private EventReservationViewModel EventReservationModel { get; set; }
    private EventReservation EventReference { get; set; }

    protected override async Task OnInitializedAsync()
    {
        EventReference = eventReservationService.GetById(Id);
        EventReservationModel = EventReservationViewModel.FromEventReservation(EventReference);
        await base.OnInitializedAsync();
    }

    private async Task OnReservationEdit(EventReservationViewModel eventReservation)
    {
        EventReference.UpdateFrom(eventReservation);
        await eventReservationService.UpdateEventAsync(EventReference);
        navigationManager.NavigateTo("/reservations");
    }

}